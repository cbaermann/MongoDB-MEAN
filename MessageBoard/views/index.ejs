<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Message Board</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <% if(messages.errors) { %>
        <% for (var x of messages.errors) { %>
            <h3><%= x %></h3>
        <% } %>
    <% } %>
    <div class="header">
        <h1>The Dojo Message Board</h1>
    </div>
    <form action="/createMessage" method="POST">
        <h3>Name: <input type="text" name="name"></h3>
        <h3>Message:</h3>
        <textarea name="message"></textarea>
        <input type="submit" value="Post Message">
    </form>
    <% for(let message of messages){ %>
        <div class="subcontainer">
            <h3><%=message.name%></h3>
            <h3>Message:  <%=message.message%></h3>
            <% for(let comment of message.comments){ %>
                <p><%=comment.name%></p>
                <p>Message: <%=comment.comment%></p>
            <% } %>
            <form action="/createcomment/<%=message._id%>" method="post">
                <label>Name</label>
                <input type="text" name="name">
                <label>Comment</label>
                <textarea name="comment"></textarea>
                <input class="btn green" type="submit" value="Post comment">
            </form>
        </div>
    <% } %>
</body>
</html>